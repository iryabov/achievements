<?xml version='1.0' encoding='UTF-8'?>
<query xmlns="http://n2oapp.net/framework/config/schema/query-4.0">
    <unique result-mapping="[0]">
        <sql file="classpath:sql/selectUser.sql"/>
    </unique>
    <fields>
        <field id="id">
            <select mapping="['id']"/>
        </field>
        <field id="email">
            <select mapping="['email']"/>
            <filters>
                <eq filter-id="email" mapping="['email']" default-value="#{email}"/>
            </filters>
        </field>
        <field id="name">
            <select mapping="['name']"/>
        </field>
        <field id="avatar">
            <select mapping="['avatar']"/>
        </field>
        <field id="stars">
            <select mapping="['stars']" default-value="0"/>
        </field>
        <field id="orders">
            <select mapping="['orders']" default-value="0"/>
        </field>
        <field id="balance">
            <select mapping="['purchases']" normalize="#data['stars'] - #this"/>
        </field>
    </fields>
</query>
